!(function (t, e) { typeof define === 'function' && define.amd ? define(e) : typeof exports === 'object' ? module.exports = e(require, exports, module) : t.Tether = e() }(this, function (t, e, o) { 'use strict'; function n (t, e) { if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function') } function i (t) { var e = t.getBoundingClientRect(); var o = {}; for (var n in e)o[n] = e[n]; if (t.ownerDocument !== document) { var r = t.ownerDocument.defaultView.frameElement; if (r) { var s = i(r); o.top += s.top, o.bottom += s.top, o.left += s.left, o.right += s.left } } return o } function r (t) { var e = getComputedStyle(t) || {}; var o = e.position; var n = []; if (o === 'fixed') return [t]; for (var i = t; (i = i.parentNode) && i && i.nodeType === 1;) { var r = void 0; try { r = getComputedStyle(i) } catch (s) {} if (typeof r === 'undefined' || r === null) return n.push(i), n; var a = r; var f = a.overflow; var l = a.overflowX; var h = a.overflowY; /(auto|scroll)/.test(f + h + l) && (o !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(r.position) >= 0) && n.push(i) } return n.push(t.ownerDocument.body), t.ownerDocument !== document && n.push(t.ownerDocument.defaultView), n } function s () { A && document.body.removeChild(A), A = null } function a (t) { var e = void 0; t === document ? (e = document, t = document.documentElement) : e = t.ownerDocument; var o = e.documentElement; var n = i(t); var r = P(); return n.top -= r.top, n.left -= r.left, typeof n.width === 'undefined' && (n.width = document.body.scrollWidth - n.left - n.right), typeof n.height === 'undefined' && (n.height = document.body.scrollHeight - n.top - n.bottom), n.top = n.top - o.clientTop, n.left = n.left - o.clientLeft, n.right = e.body.clientWidth - n.width - n.left, n.bottom = e.body.clientHeight - n.height - n.top, n } function f (t) { return t.offsetParent || document.documentElement } function l () { var t = document.createElement('div'); t.style.width = '100%', t.style.height = '200px'; var e = document.createElement('div'); h(e.style, { position: 'absolute', top: 0, left: 0, pointerEvents: 'none', visibility: 'hidden', width: '200px', height: '150px', overflow: 'hidden' }), e.appendChild(t), document.body.appendChild(e); var o = t.offsetWidth; e.style.overflow = 'scroll'; var n = t.offsetWidth; o === n && (n = e.clientWidth), document.body.removeChild(e); var i = o - n; return { width: i, height: i } } function h () { var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0]; var e = []; return Array.prototype.push.apply(e, arguments), e.slice(1).forEach(function (e) { if (e) for (var o in e)({}).hasOwnProperty.call(e, o) && (t[o] = e[o]) }), t } function u (t, e) { if (typeof t.classList !== 'undefined')e.split(' ').forEach(function (e) { e.trim() && t.classList.remove(e) }); else { var o = new RegExp('(^| )' + e.split(' ').join('|') + '( |$)', 'gi'); var n = c(t).replace(o, ' '); g(t, n) } } function d (t, e) { if (typeof t.classList !== 'undefined')e.split(' ').forEach(function (e) { e.trim() && t.classList.add(e) }); else { u(t, e); var o = c(t) + (' ' + e); g(t, o) } } function p (t, e) { if (typeof t.classList !== 'undefined') return t.classList.contains(e); var o = c(t); return new RegExp('(^| )' + e + '( |$)', 'gi').test(o) } function c (t) { return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString ? t.className.baseVal : t.className } function g (t, e) { t.setAttribute('class', e) } function m (t, e, o) { o.forEach(function (o) { e.indexOf(o) === -1 && p(t, o) && u(t, o) }), e.forEach(function (e) { p(t, e) || d(t, e) }) } function n (t, e) { if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function') } function v (t, e) { if (typeof e !== 'function' && e !== null) throw new TypeError('Super expression must either be null or a function, not ' + typeof e); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) } function y (t, e) { var o = arguments.length <= 2 || void 0 === arguments[2] ? 1 : arguments[2]; return t + o >= e && e >= t - o } function b () { return typeof performance !== 'undefined' && typeof performance.now !== 'undefined' ? performance.now() : +new Date() } function w () { for (var t = { top: 0, left: 0 }, e = arguments.length, o = Array(e), n = 0; e > n; n++)o[n] = arguments[n]; return o.forEach(function (e) { var o = e.top; var n = e.left; typeof o === 'string' && (o = parseFloat(o, 10)), typeof n === 'string' && (n = parseFloat(n, 10)), t.top += o, t.left += n }), t } function C (t, e) { return typeof t.left === 'string' && t.left.indexOf('%') !== -1 && (t.left = parseFloat(t.left, 10) / 100 * e.width), typeof t.top === 'string' && t.top.indexOf('%') !== -1 && (t.top = parseFloat(t.top, 10) / 100 * e.height), t } function O (t, e) { return e === 'scrollParent' ? e = t.scrollParents[0] : e === 'window' && (e = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset]), e === document && (e = e.documentElement), typeof e.nodeType !== 'undefined' && !(function () { var t = e; var o = a(e); var n = o; var i = getComputedStyle(e); if (e = [n.left, n.top, o.width + n.left, o.height + n.top], t.ownerDocument !== document) { var r = t.ownerDocument.defaultView; e[0] += r.pageXOffset, e[1] += r.pageYOffset, e[2] += r.pageXOffset, e[3] += r.pageYOffset }$.forEach(function (t, o) { t = t[0].toUpperCase() + t.substr(1), t === 'Top' || t === 'Left' ? e[o] += parseFloat(i['border' + t + 'Width']) : e[o] -= parseFloat(i['border' + t + 'Width']) }) }()), e } var E = (function () { function t (t, e) { for (var o = 0; o < e.length; o++) { var n = e[o]; n.enumerable = n.enumerable || !1, n.configurable = !0, 'value' in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } } return function (e, o, n) { return o && t(e.prototype, o), n && t(e, n), e } }()); var x = void 0; typeof x === 'undefined' && (x = { modules: [] }); var A = null; var T = (function () { var t = 0; return function () { return ++t } }()); var S = {}; var P = function () { var t = A; t || (t = document.createElement('div'), t.setAttribute('data-tether-id', T()), h(t.style, { top: 0, left: 0, position: 'absolute' }), document.body.appendChild(t), A = t); var e = t.getAttribute('data-tether-id'); return typeof S[e] === 'undefined' && (S[e] = i(t), M(function () { delete S[e] })), S[e] }; var W = []; var M = function (t) { W.push(t) }; var _ = function () { for (var t = void 0; t = W.pop();)t() }; var k = (function () { function t () { n(this, t) } return E(t, [{ key: 'on', value: function (t, e, o) { var n = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3]; typeof this.bindings === 'undefined' && (this.bindings = {}), typeof this.bindings[t] === 'undefined' && (this.bindings[t] = []), this.bindings[t].push({ handler: e, ctx: o, once: n }) } }, { key: 'once', value: function (t, e, o) { this.on(t, e, o, !0) } }, { key: 'off', value: function (t, e) { if (typeof this.bindings !== 'undefined' && typeof this.bindings[t] !== 'undefined') if (typeof e === 'undefined') delete this.bindings[t]; else for (var o = 0; o < this.bindings[t].length;) this.bindings[t][o].handler === e ? this.bindings[t].splice(o, 1) : ++o } }, { key: 'trigger', value: function (t) { if (typeof this.bindings !== 'undefined' && this.bindings[t]) { for (var e = 0, o = arguments.length, n = Array(o > 1 ? o - 1 : 0), i = 1; o > i; i++)n[i - 1] = arguments[i]; for (;e < this.bindings[t].length;) { var r = this.bindings[t][e]; var s = r.handler; var a = r.ctx; var f = r.once; var l = a; typeof l === 'undefined' && (l = this), s.apply(l, n), f ? this.bindings[t].splice(e, 1) : ++e } } } }]), t }()); x.Utils = { getActualBoundingClientRect: i, getScrollParents: r, getBounds: a, getOffsetParent: f, extend: h, addClass: d, removeClass: u, hasClass: p, updateClasses: m, defer: M, flush: _, uniqueId: T, Evented: k, getScrollBarSize: l, removeUtilElements: s }; var B = (function () { function t (t, e) { var o = []; var n = !0; var i = !1; var r = void 0; try { for (var s, a = t[Symbol.iterator](); !(n = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e); n = !0); } catch (f) { i = !0, r = f } finally { try { !n && a['return'] && a['return']() } finally { if (i) throw r } } return o } return function (e, o) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, o); throw new TypeError('Invalid attempt to destructure non-iterable instance') } }()); var E = (function () { function t (t, e) { for (var o = 0; o < e.length; o++) { var n = e[o]; n.enumerable = n.enumerable || !1, n.configurable = !0, 'value' in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } } return function (e, o, n) { return o && t(e.prototype, o), n && t(e, n), e } }()); var z = function (t, e, o) { for (var n = !0; n;) { var i = t; var r = e; var s = o; n = !1, i === null && (i = Function.prototype); var a = Object.getOwnPropertyDescriptor(i, r); if (void 0 !== a) { if ('value' in a) return a.value; var f = a.get; if (void 0 === f) return; return f.call(s) } var l = Object.getPrototypeOf(i); if (l === null) return; t = l, e = r, o = s, n = !0, a = l = void 0 } }; if (typeof x === 'undefined') throw new Error('You must include the utils.js file before tether.js'); var j = x.Utils; var r = j.getScrollParents; var a = j.getBounds; var f = j.getOffsetParent; var h = j.extend; var d = j.addClass; var u = j.removeClass; var m = j.updateClasses; var M = j.defer; var _ = j.flush; var l = j.getScrollBarSize; var s = j.removeUtilElements; var Y = (function () { if (typeof document === 'undefined') return ''; for (var t = document.createElement('div'), e = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'], o = 0; o < e.length; ++o) { var n = e[o]; if (void 0 !== t.style[n]) return n } }()); var L = []; var D = function () { L.forEach(function (t) { t.position(!1) }), _() }; !(function () { var t = null; var e = null; var o = null; var n = function i () { return typeof e !== 'undefined' && e > 16 ? (e = Math.min(e - 16, 250), void (o = setTimeout(i, 250))) : void (typeof t !== 'undefined' && b() - t < 10 || (o != null && (clearTimeout(o), o = null), t = b(), D(), e = b() - t)) }; typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined' && ['resize', 'scroll', 'touchmove'].forEach(function (t) { window.addEventListener(t, n) }) }()); var X = { center: 'center', left: 'right', right: 'left' }; var F = { middle: 'middle', top: 'bottom', bottom: 'top' }; var H = { top: 0, left: 0, middle: '50%', center: '50%', bottom: '100%', right: '100%' }; var N = function (t, e) { var o = t.left; var n = t.top; return o === 'auto' && (o = X[e.left]), n === 'auto' && (n = F[e.top]), { left: o, top: n } }; var U = function (t) { var e = t.left; var o = t.top; return typeof H[t.left] !== 'undefined' && (e = H[t.left]), typeof H[t.top] !== 'undefined' && (o = H[t.top]), { left: e, top: o } }; var V = function (t) { var e = t.split(' '); var o = B(e, 2); var n = o[0]; var i = o[1]; return { top: n, left: i } }; var R = V; var q = (function (t) { function e (t) { var o = this; n(this, e), z(Object.getPrototypeOf(e.prototype), 'constructor', this).call(this), this.position = this.position.bind(this), L.push(this), this.history = [], this.setOptions(t, !1), x.modules.forEach(function (t) { typeof t.initialize !== 'undefined' && t.initialize.call(o) }), this.position() } return v(e, t), E(e, [{ key: 'getClass', value: function () { var t = arguments.length <= 0 || void 0 === arguments[0] ? '' : arguments[0]; var e = this.options.classes; return typeof e !== 'undefined' && e[t] ? this.options.classes[t] : this.options.classPrefix ? this.options.classPrefix + '-' + t : t } }, { key: 'setOptions', value: function (t) { var e = this; var o = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1]; var n = { offset: '0 0', targetOffset: '0 0', targetAttachment: 'auto auto', classPrefix: 'tether' }; this.options = h(n, t); var i = this.options; var s = i.element; var a = i.target; var f = i.targetModifier; if (this.element = s, this.target = a, this.targetModifier = f, this.target === 'viewport' ? (this.target = document.body, this.targetModifier = 'visible') : this.target === 'scroll-handle' && (this.target = document.body, this.targetModifier = 'scroll-handle'), ['element', 'target'].forEach(function (t) { if (typeof e[t] === 'undefined') throw new Error('Tether Error: Both element and target must be defined'); typeof e[t].jquery !== 'undefined' ? e[t] = e[t][0] : typeof e[t] === 'string' && (e[t] = document.querySelector(e[t])) }), d(this.element, this.getClass('element')), this.options.addTargetClasses !== !1 && d(this.target, this.getClass('target')), !this.options.attachment) throw new Error('Tether Error: You must provide an attachment'); this.targetAttachment = R(this.options.targetAttachment), this.attachment = R(this.options.attachment), this.offset = V(this.options.offset), this.targetOffset = V(this.options.targetOffset), typeof this.scrollParents !== 'undefined' && this.disable(), this.targetModifier === 'scroll-handle' ? this.scrollParents = [this.target] : this.scrollParents = r(this.target), this.options.enabled !== !1 && this.enable(o) } }, { key: 'getTargetBounds', value: function () { if (typeof this.targetModifier === 'undefined') return a(this.target); if (this.targetModifier === 'visible') { if (this.target === document.body) return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth }; var t = a(this.target); var e = { height: t.height, width: t.width, top: t.top, left: t.left }; return e.height = Math.min(e.height, t.height - (pageYOffset - t.top)), e.height = Math.min(e.height, t.height - (t.top + t.height - (pageYOffset + innerHeight))), e.height = Math.min(innerHeight, e.height), e.height -= 2, e.width = Math.min(e.width, t.width - (pageXOffset - t.left)), e.width = Math.min(e.width, t.width - (t.left + t.width - (pageXOffset + innerWidth))), e.width = Math.min(innerWidth, e.width), e.width -= 2, e.top < pageYOffset && (e.top = pageYOffset), e.left < pageXOffset && (e.left = pageXOffset), e } if (this.targetModifier === 'scroll-handle') { var t = void 0; var o = this.target; o === document.body ? (o = document.documentElement, t = { left: pageXOffset, top: pageYOffset, height: innerHeight, width: innerWidth }) : t = a(o); var n = getComputedStyle(o); var i = o.scrollWidth > o.clientWidth || [n.overflow, n.overflowX].indexOf('scroll') >= 0 || this.target !== document.body; var r = 0; i && (r = 15); var s = t.height - parseFloat(n.borderTopWidth) - parseFloat(n.borderBottomWidth) - r; var e = { width: 15, height: 0.975 * s * (s / o.scrollHeight), left: t.left + t.width - parseFloat(n.borderLeftWidth) - 15 }; var f = 0; s < 408 && this.target === document.body && (f = -11e-5 * Math.pow(s, 2) - 0.00727 * s + 22.58), this.target !== document.body && (e.height = Math.max(e.height, 24)); var l = this.target.scrollTop / (o.scrollHeight - s); return e.top = l * (s - e.height - f) + t.top + parseFloat(n.borderTopWidth), this.target === document.body && (e.height = Math.max(e.height, 24)), e } } }, { key: 'clearCache', value: function () { this._cache = {} } }, { key: 'cache', value: function (t, e) { return typeof this._cache === 'undefined' && (this._cache = {}), typeof this._cache[t] === 'undefined' && (this._cache[t] = e.call(this)), this._cache[t] } }, { key: 'enable', value: function () { var t = this; var e = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0]; this.options.addTargetClasses !== !1 && d(this.target, this.getClass('enabled')), d(this.element, this.getClass('enabled')), this.enabled = !0, this.scrollParents.forEach(function (e) { e !== t.target.ownerDocument && e.addEventListener('scroll', t.position) }), e && this.position() } }, { key: 'disable', value: function () { var t = this; u(this.target, this.getClass('enabled')), u(this.element, this.getClass('enabled')), this.enabled = !1, typeof this.scrollParents !== 'undefined' && this.scrollParents.forEach(function (e) { e.removeEventListener('scroll', t.position) }) } }, { key: 'destroy', value: function () { var t = this; this.disable(), L.forEach(function (e, o) { e === t && L.splice(o, 1) }), L.length === 0 && s() } }, { key: 'updateAttachClasses', value: function (t, e) { var o = this; t = t || this.attachment, e = e || this.targetAttachment; var n = ['left', 'top', 'bottom', 'right', 'middle', 'center']; typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length && this._addAttachClasses.splice(0, this._addAttachClasses.length), typeof this._addAttachClasses === 'undefined' && (this._addAttachClasses = []); var i = this._addAttachClasses; t.top && i.push(this.getClass('element-attached') + '-' + t.top), t.left && i.push(this.getClass('element-attached') + '-' + t.left), e.top && i.push(this.getClass('target-attached') + '-' + e.top), e.left && i.push(this.getClass('target-attached') + '-' + e.left); var r = []; n.forEach(function (t) { r.push(o.getClass('element-attached') + '-' + t), r.push(o.getClass('target-attached') + '-' + t) }), M(function () { typeof o._addAttachClasses !== 'undefined' && (m(o.element, o._addAttachClasses, r), o.options.addTargetClasses !== !1 && m(o.target, o._addAttachClasses, r), delete o._addAttachClasses) }) } }, { key: 'position', value: function () { var t = this; var e = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0]; if (this.enabled) { this.clearCache(); var o = N(this.targetAttachment, this.attachment); this.updateAttachClasses(this.attachment, o); var n = this.cache('element-bounds', function () { return a(t.element) }); var i = n.width; var r = n.height; if (i === 0 && r === 0 && typeof this.lastSize !== 'undefined') { var s = this.lastSize; i = s.width, r = s.height } else this.lastSize = { width: i, height: r }; var h = this.cache('target-bounds', function () { return t.getTargetBounds() }); var u = h; var d = C(U(this.attachment), { width: i, height: r }); var p = C(U(o), u); var c = C(this.offset, { width: i, height: r }); var g = C(this.targetOffset, u); d = w(d, c), p = w(p, g); for (var m = h.left + p.left - d.left, v = h.top + p.top - d.top, y = 0; y < x.modules.length; ++y) { var b = x.modules[y]; var O = b.position.call(this, { left: m, top: v, targetAttachment: o, targetPos: h, elementPos: n, offset: d, targetOffset: p, manualOffset: c, manualTargetOffset: g, scrollbarSize: S, attachment: this.attachment }); if (O === !1) return !1; typeof O !== 'undefined' && typeof O === 'object' && (v = O.top, m = O.left) } var E = { page: { top: v, left: m }, viewport: { top: v - pageYOffset, bottom: pageYOffset - v - r + innerHeight, left: m - pageXOffset, right: pageXOffset - m - i + innerWidth } }; var A = this.target.ownerDocument; var T = A.defaultView; var S = void 0; return A.body.scrollWidth > T.innerWidth && (S = this.cache('scrollbar-size', l), E.viewport.bottom -= S.height), A.body.scrollHeight > T.innerHeight && (S = this.cache('scrollbar-size', l), E.viewport.right -= S.width), (['', 'static'].indexOf(A.body.style.position) === -1 || ['', 'static'].indexOf(A.body.parentElement.style.position) === -1) && (E.page.bottom = A.body.scrollHeight - v - r, E.page.right = A.body.scrollWidth - m - i), typeof this.options.optimizations !== 'undefined' && this.options.optimizations.moveElement !== !1 && typeof this.targetModifier === 'undefined' && !(function () { var e = t.cache('target-offsetparent', function () { return f(t.target) }); var o = t.cache('target-offsetparent-bounds', function () { return a(e) }); var n = getComputedStyle(e); var i = o; var r = {}; if (['Top', 'Left', 'Bottom', 'Right'].forEach(function (t) { r[t.toLowerCase()] = parseFloat(n['border' + t + 'Width']) }), o.right = A.body.scrollWidth - o.left - i.width + r.right, o.bottom = A.body.scrollHeight - o.top - i.height + r.bottom, E.page.top >= o.top + r.top && E.page.bottom >= o.bottom && E.page.left >= o.left + r.left && E.page.right >= o.right) { var s = e.scrollTop; var l = e.scrollLeft; E.offset = { top: E.page.top - o.top + s - r.top, left: E.page.left - o.left + l - r.left } } }()), this.move(E), this.history.unshift(E), this.history.length > 3 && this.history.pop(), e && _(), !0 } } }, { key: 'move', value: function (t) { var e = this; if (typeof this.element.parentNode !== 'undefined') { var o = {}; for (var n in t) { o[n] = {}; for (var i in t[n]) { for (var r = !1, s = 0; s < this.history.length; ++s) { var a = this.history[s]; if (typeof a[n] !== 'undefined' && !y(a[n][i], t[n][i])) { r = !0; break } }r || (o[n][i] = !0) } } var l = { top: '', left: '', right: '', bottom: '' }; var u = function (t, o) { var n = typeof e.options.optimizations !== 'undefined'; var i = n ? e.options.optimizations.gpu : null; if (i !== !1) { var r = void 0; var s = void 0; t.top ? (l.top = 0, r = o.top) : (l.bottom = 0, r = -o.bottom), t.left ? (l.left = 0, s = o.left) : (l.right = 0, s = -o.right), l[Y] = 'translateX(' + Math.round(s) + 'px) translateY(' + Math.round(r) + 'px)', Y !== 'msTransform' && (l[Y] += ' translateZ(0)') } else t.top ? l.top = o.top + 'px' : l.bottom = o.bottom + 'px', t.left ? l.left = o.left + 'px' : l.right = o.right + 'px' }; var d = !1; if ((o.page.top || o.page.bottom) && (o.page.left || o.page.right) ? (l.position = 'absolute', u(o.page, t.page)) : (o.viewport.top || o.viewport.bottom) && (o.viewport.left || o.viewport.right) ? (l.position = 'fixed', u(o.viewport, t.viewport)) : typeof o.offset !== 'undefined' && o.offset.top && o.offset.left ? !(function () { l.position = 'absolute'; var n = e.cache('target-offsetparent', function () { return f(e.target) }); f(e.element) !== n && M(function () { e.element.parentNode.removeChild(e.element), n.appendChild(e.element) }), u(o.offset, t.offset), d = !0 }()) : (l.position = 'absolute', u({ top: !0, left: !0 }, t.page)), !d) { for (var p = !0, c = this.element.parentNode; c && c.nodeType === 1 && c.tagName !== 'BODY';) { if (getComputedStyle(c).position !== 'static') { p = !1; break }c = c.parentNode }p || (this.element.parentNode.removeChild(this.element), this.element.ownerDocument.body.appendChild(this.element)) } var g = {}; var m = !1; for (var i in l) { var v = l[i]; var b = this.element.style[i]; b !== v && (m = !0, g[i] = v) }m && M(function () { h(e.element.style, g) }) } } }]), e }(k)); q.modules = [], x.position = D; var I = h(q, x); var B = (function () { function t (t, e) { var o = []; var n = !0; var i = !1; var r = void 0; try { for (var s, a = t[Symbol.iterator](); !(n = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e); n = !0); } catch (f) { i = !0, r = f } finally { try { !n && a['return'] && a['return']() } finally { if (i) throw r } } return o } return function (e, o) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, o); throw new TypeError('Invalid attempt to destructure non-iterable instance') } }()); var j = x.Utils; var a = j.getBounds; var h = j.extend; var m = j.updateClasses; var M = j.defer; var $ = ['left', 'top', 'right', 'bottom']; x.modules.push({ position: function (t) { var e = this; var o = t.top; var n = t.left; var i = t.targetAttachment; if (!this.options.constraints) return !0; var r = this.cache('element-bounds', function () { return a(e.element) }); var s = r.height; var f = r.width; if (f === 0 && s === 0 && typeof this.lastSize !== 'undefined') { var l = this.lastSize; f = l.width, s = l.height } var u = this.cache('target-bounds', function () { return e.getTargetBounds() }); var d = u.height; var p = u.width; var c = [this.getClass('pinned'), this.getClass('out-of-bounds')]; this.options.constraints.forEach(function (t) { var e = t.outOfBoundsClass; var o = t.pinnedClass; e && c.push(e), o && c.push(o) }), c.forEach(function (t) { ['left', 'top', 'right', 'bottom'].forEach(function (e) { c.push(t + '-' + e) }) }); var g = []; var v = h({}, i); var y = h({}, this.attachment); return this.options.constraints.forEach(function (t) { var r = t.to; var a = t.attachment; var l = t.pin; typeof a === 'undefined' && (a = ''); var h = void 0; var u = void 0; if (a.indexOf(' ') >= 0) { var c = a.split(' '); var m = B(c, 2); u = m[0], h = m[1] } else h = u = a; var b = O(e, r); (u === 'target' || u === 'both') && (o < b[1] && v.top === 'top' && (o += d, v.top = 'bottom'), o + s > b[3] && v.top === 'bottom' && (o -= d, v.top = 'top')), u === 'together' && (v.top === 'top' && (y.top === 'bottom' && o < b[1] ? (o += d, v.top = 'bottom', o += s, y.top = 'top') : y.top === 'top' && o + s > b[3] && o - (s - d) >= b[1] && (o -= s - d, v.top = 'bottom', y.top = 'bottom')), v.top === 'bottom' && (y.top === 'top' && o + s > b[3] ? (o -= d, v.top = 'top', o -= s, y.top = 'bottom') : y.top === 'bottom' && o < b[1] && o + (2 * s - d) <= b[3] && (o += s - d, v.top = 'top', y.top = 'top')), v.top === 'middle' && (o + s > b[3] && y.top === 'top' ? (o -= s, y.top = 'bottom') : o < b[1] && y.top === 'bottom' && (o += s, y.top = 'top'))), (h === 'target' || h === 'both') && (n < b[0] && v.left === 'left' && (n += p, v.left = 'right'), n + f > b[2] && v.left === 'right' && (n -= p, v.left = 'left')), h === 'together' && (n < b[0] && v.left === 'left' ? y.left === 'right' ? (n += p, v.left = 'right', n += f, y.left = 'left') : y.left === 'left' && (n += p, v.left = 'right', n -= f, y.left = 'right') : n + f > b[2] && v.left === 'right' ? y.left === 'left' ? (n -= p, v.left = 'left', n -= f, y.left = 'right') : y.left === 'right' && (n -= p, v.left = 'left', n += f, y.left = 'left') : v.left === 'center' && (n + f > b[2] && y.left === 'left' ? (n -= f, y.left = 'right') : n < b[0] && y.left === 'right' && (n += f, y.left = 'left'))), (u === 'element' || u === 'both') && (o < b[1] && y.top === 'bottom' && (o += s, y.top = 'top'), o + s > b[3] && y.top === 'top' && (o -= s, y.top = 'bottom')), (h === 'element' || h === 'both') && (n < b[0] && (y.left === 'right' ? (n += f, y.left = 'left') : y.left === 'center' && (n += f / 2, y.left = 'left')), n + f > b[2] && (y.left === 'left' ? (n -= f, y.left = 'right') : y.left === 'center' && (n -= f / 2, y.left = 'right'))), typeof l === 'string' ? l = l.split(',').map(function (t) { return t.trim() }) : l === !0 && (l = ['top', 'left', 'right', 'bottom']), l = l || []; var w = []; var C = []; o < b[1] && (l.indexOf('top') >= 0 ? (o = b[1], w.push('top')) : C.push('top')), o + s > b[3] && (l.indexOf('bottom') >= 0 ? (o = b[3] - s, w.push('bottom')) : C.push('bottom')), n < b[0] && (l.indexOf('left') >= 0 ? (n = b[0], w.push('left')) : C.push('left')), n + f > b[2] && (l.indexOf('right') >= 0 ? (n = b[2] - f, w.push('right')) : C.push('right')), w.length && !(function () { var t = void 0; t = typeof e.options.pinnedClass !== 'undefined' ? e.options.pinnedClass : e.getClass('pinned'), g.push(t), w.forEach(function (e) { g.push(t + '-' + e) }) }()), C.length && !(function () { var t = void 0; t = typeof e.options.outOfBoundsClass !== 'undefined' ? e.options.outOfBoundsClass : e.getClass('out-of-bounds'), g.push(t), C.forEach(function (e) { g.push(t + '-' + e) }) }()), (w.indexOf('left') >= 0 || w.indexOf('right') >= 0) && (y.left = v.left = !1), (w.indexOf('top') >= 0 || w.indexOf('bottom') >= 0) && (y.top = v.top = !1), (v.top !== i.top || v.left !== i.left || y.top !== e.attachment.top || y.left !== e.attachment.left) && (e.updateAttachClasses(y, v), e.trigger('update', { attachment: y, targetAttachment: v })) }), M(function () { e.options.addTargetClasses !== !1 && m(e.target, g, c), m(e.element, g, c) }), { top: o, left: n } } }); var j = x.Utils; var a = j.getBounds; var m = j.updateClasses; var M = j.defer; x.modules.push({ position: function (t) { var e = this; var o = t.top; var n = t.left; var i = this.cache('element-bounds', function () { return a(e.element) }); var r = i.height; var s = i.width; var f = this.getTargetBounds(); var l = o + r; var h = n + s; var u = []; o <= f.bottom && l >= f.top && ['left', 'right'].forEach(function (t) { var e = f[t]; (e === n || e === h) && u.push(t) }), n <= f.right && h >= f.left && ['top', 'bottom'].forEach(function (t) { var e = f[t]; (e === o || e === l) && u.push(t) }); var d = []; var p = []; var c = ['left', 'top', 'right', 'bottom']; return d.push(this.getClass('abutted')), c.forEach(function (t) { d.push(e.getClass('abutted') + '-' + t) }), u.length && p.push(this.getClass('abutted')), u.forEach(function (t) { p.push(e.getClass('abutted') + '-' + t) }), M(function () { e.options.addTargetClasses !== !1 && m(e.target, p, d), m(e.element, p, d) }), !0 } }); var B = (function () { function t (t, e) { var o = []; var n = !0; var i = !1; var r = void 0; try { for (var s, a = t[Symbol.iterator](); !(n = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e); n = !0); } catch (f) { i = !0, r = f } finally { try { !n && a['return'] && a['return']() } finally { if (i) throw r } } return o } return function (e, o) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, o); throw new TypeError('Invalid attempt to destructure non-iterable instance') } }()); return x.modules.push({ position: function (t) { var e = t.top; var o = t.left; if (this.options.shift) { var n = this.options.shift; typeof this.options.shift === 'function' && (n = this.options.shift.call(this, { top: e, left: o })); var i = void 0; var r = void 0; if (typeof n === 'string') { n = n.split(' '), n[1] = n[1] || n[0]; var s = n; var a = B(s, 2); i = a[0], r = a[1], i = parseFloat(i, 10), r = parseFloat(r, 10) } else i = n.top, r = n.left; return e += i, o += r, { top: e, left: o } } } }), I }))
